<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <title>Gilded Rose Kata</title>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>

  <script type="text/javascript" src="src/gilded_rose.js"></script>

  <script type="text/javascript">
    $( document ).ready(function() {

      Handlebars.registerHelper('json', function(context) {
        return JSON.stringify(context);
      });

      var DAYS = 2;
      var TEMPLATE_SOURCE = $("#inventory_template").html();
      var template = Handlebars.compile(TEMPLATE_SOURCE);

      items.push(new Item('+5 Dexterity Vest', 10, 20));
      items.push(new Item('Aged Brie', 2, 0));
      items.push(new Item('Elixir of the Mongoose', 5, 7));
      items.push(new Item('Sulfuras, Hand of Ragnaros', 0, 80));
      items.push(new Item('Sulfuras, Hand of Ragnaros', -1, 80));
      items.push(new Item('Backstage passes to a TAFKAL80ETC concert', 15, 20));
      items.push(new Item('Backstage passes to a TAFKAL80ETC concert', 10, 46));
      items.push(new Item('Backstage passes to a TAFKAL80ETC concert', 10, 49));
      items.push(new Item('Backstage passes to a TAFKAL80ETC concert', 5, 46));
      // this conjured item does not work properly yet
      items.push(new Item('Conjured Mana Cake', 3, 6));

      for (var i = 0; i < DAYS; i++) {
        showItemsForDay(i);
        update_quality();
      }

      function showItemsForDay(day) {
        var html = template(
          {
            items: items,
            day: day
          }
        );

        $('main').append(html);
      }
    });
  </script>
</head>

  <body>
    <header class="container">
      <div class="jumbotron">
        <h1>Gilded Rose Kata</h1>
        <p>Below you can see the output of the guilded rose code</p>
      </div>
    </header>
    <main class="container">
      <h2>Inventory</h2>
    </main>

    <script id="inventory_template" type="text/x-handlebars-template">
      <h3>Day {{day}}</h3>
      <table class="table table-striped">
        <thead>
          <th>Name</th>
          <th>Sell In</th>
          <th>Quality</th>
        </thead>
        <tbody>
          {{#each items}}
          <tr>
            <td>{{name}}</td>
            <td>{{sell_in}}</td>
            <td>{{quality}}</td>
          </tr>
          {{/each}}
        <tbody>
      </table>
      <hr>
    </script>
  </body>
</html>
